import{_ as l,r as o,o as i,c as p,b as t,d as a,a as e,e as r}from"./app--BhDgo8F.js";const c="/assets/bug-info-DD-uBJjH.png",d="/assets/build-gradle-DE_rwvD5.png",u={},_=e("h1",{id:"记录一次升级sdk引发的bug【uniapp安卓离线打包】",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#记录一次升级sdk引发的bug【uniapp安卓离线打包】"},[e("span",null,"记录一次升级SDK引发的Bug【uniapp安卓离线打包】")])],-1),h=e("p",null,"因为App中需要引入uniPush，所以打算同时把SDK也升级到最新的版本（3.7.3）,之前的是3.6.4。",-1),g=e("p",null,[a("升级后的报错信息："),e("br"),e("code",null,"java.lang.NoSuchMethodError: No static method setDefaultTypeKey(Ljava/lang/String;)V in class Lcom/alibaba/fastjson/JSON; or its super classes (declaration of 'com.alibaba.fastjson.JSON' appears in /data/app/~~-L98FBPg3LzpxZEUmk7JUQ==/com.bytegreen.chaosuan-a4YdKoR-vZVU2xjVNSqqoA==/base.apk)")],-1),b=e("h2",{id:"bug的开端",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#bug的开端"},[e("span",null,"bug的开端")])],-1),m=e("p",null,"离线打包必须保证HbuilderX 的版本和 SDK 的版本保持一致，同时更新HbuilderX 和下载最新版的SDK包。",-1),E=e("code",null,"libs",-1),f=e("code",null,"unipush",-1),B={href:"https://nativesupport.dcloud.net.cn/AppDocs/usesdk/android.html",target:"_blank",rel:"noopener noreferrer"},D=r('<p>在 <code>Android Studio</code> 进行真机调试，发现报错：<br><img src="'+c+'" alt="bug-info"></p><h2 id="过程" tabindex="-1"><a class="header-anchor" href="#过程"><span>过程</span></a></h2><p>小小前端一枚，对安卓这一块也只是一知半解，是的 看不懂~~ 🙈 只能对照着文档一步一步看下去了。</p><ol><li>先是检查 <code>libs</code> 里面的包是否都替换上了包括推送相关的包是否有遗漏。</li><li>然后心里觉得是 <code>unipush</code> 这边出的问题，又按着文档说明每一个需要调整的地方都仔细过了一遍，没发现任何问题。</li></ol><p>实属无奈，也没什么头绪，度娘也没能给出什么好的响应。<br> 折腾了一段时间，重头把离线打包这一块的文档重新看了一遍：[Android 原生工程配置 方式二-导入工程]，发现一些端疑：<br><img src="'+d+'" alt="端疑"></p><p>最新文档上的build-gradle配置有所变化，这里按文档改了之后项目成功运行起来的！！！</p><h2 id="后话" tabindex="-1"><a class="header-anchor" href="#后话"><span>后话</span></a></h2><p>当初看到 <code>Lcom/alibaba/fastjson/JSON</code> 报错信息的这个就留了个心眼，只是对安卓这边的东西不太熟悉，也没能看出些什么东西来。</p><p>总而言之：升级有风险~</p><p>END</p>',10);function A(S,K){const n=o("PostInfo"),s=o("ExternalLinkIcon");return i(),p("div",null,[_,t(n),a(),h,g,b,m,e("p",null,[a("在项目的 "),E,a(" 里面把所有的包替换成最新的版本，同时按照 "),f,a(" 的文档配置安卓工程："),e("a",B,[a("App离线打包"),t(s)]),a("。一切顺利，直接打包成功了。安装到手机上打开完全没有反应，直接是打不开。")]),D])}const N=l(u,[["render",A],["__file","记录一次升级SDK引发的Bug.html.vue"]]),v=JSON.parse('{"path":"/blog/uniApp/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E5%8D%87%E7%BA%A7SDK%E5%BC%95%E5%8F%91%E7%9A%84Bug/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E5%8D%87%E7%BA%A7SDK%E5%BC%95%E5%8F%91%E7%9A%84Bug.html","title":"记录一次升级SDK引发的Bug(安卓离线打包)","lang":"zh-CN","frontmatter":{"title":"记录一次升级SDK引发的Bug(安卓离线打包)","date":"2023-03-21","tags":["uniApp","安卓离线打包"],"poster":"/images/poster/uniapp_offLine_poster.jpg","author":"清咖","category":"uniApp"},"headers":[{"level":2,"title":"bug的开端","slug":"bug的开端","link":"#bug的开端","children":[]},{"level":2,"title":"过程","slug":"过程","link":"#过程","children":[]},{"level":2,"title":"后话","slug":"后话","link":"#后话","children":[]}],"git":{"updatedTime":1714378029000,"contributors":[{"name":"清咔","email":"874518796@qq.com","commits":1}]},"filePathRelative":"blog/uniApp/记录一次升级SDK引发的Bug/记录一次升级SDK引发的Bug.md"}');export{N as comp,v as data};
