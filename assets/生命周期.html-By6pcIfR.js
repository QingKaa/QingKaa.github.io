import{_ as a,r as t,o,c as e,b as p,a as n,e as c}from"./app-DERrjhee.js";const l={},r=n("h1",{id:"vue3生命周期",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#vue3生命周期"},[n("span",null,"vue3生命周期")])],-1),i=c(`<p><strong>vue3</strong> 中的生命周期类型如下：<br> 其中在声明式API中只对外暴露了部分钩子函数:</p><p><strong>挂载:</strong> <code>onBeforeMount</code>, <code>onMounted</code><br><strong>更新:</strong> <code>onBeforeUpdate</code>, <code>onUpdated</code><br><strong>卸载:</strong> <code>onBeforeUnmount</code>, <code>onUnmounted</code><br><strong>SSR:</strong> <code>onServerPrefetch</code> (注册一个异步函数，在组件实例在服务器上被渲染之前调用)</p><p>相对vue2来，创建阶段的生命周期没有再声明式API对导出，只在选项式API中提供。</p><p><strong>创建:</strong> <code>beforeCreate</code>, <code>created</code></p><div class="language-typescript line-numbers-mode" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token comment">// packages\\runtime-core\\src\\enums.ts</span>
<span class="token keyword">export</span> <span class="token keyword">enum</span> LifecycleHooks <span class="token punctuation">{</span>
  <span class="token constant">BEFORE_CREATE</span> <span class="token operator">=</span> <span class="token string">&#39;bc&#39;</span><span class="token punctuation">,</span>
  <span class="token constant">CREATED</span> <span class="token operator">=</span> <span class="token string">&#39;c&#39;</span><span class="token punctuation">,</span>
  <span class="token constant">BEFORE_MOUNT</span> <span class="token operator">=</span> <span class="token string">&#39;bm&#39;</span><span class="token punctuation">,</span>
  <span class="token constant">MOUNTED</span> <span class="token operator">=</span> <span class="token string">&#39;m&#39;</span><span class="token punctuation">,</span>
  <span class="token constant">BEFORE_UPDATE</span> <span class="token operator">=</span> <span class="token string">&#39;bu&#39;</span><span class="token punctuation">,</span>
  <span class="token constant">UPDATED</span> <span class="token operator">=</span> <span class="token string">&#39;u&#39;</span><span class="token punctuation">,</span>
  <span class="token constant">BEFORE_UNMOUNT</span> <span class="token operator">=</span> <span class="token string">&#39;bum&#39;</span><span class="token punctuation">,</span>
  <span class="token constant">UNMOUNTED</span> <span class="token operator">=</span> <span class="token string">&#39;um&#39;</span><span class="token punctuation">,</span>
  <span class="token constant">DEACTIVATED</span> <span class="token operator">=</span> <span class="token string">&#39;da&#39;</span><span class="token punctuation">,</span>
  <span class="token constant">ACTIVATED</span> <span class="token operator">=</span> <span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span>
  <span class="token constant">RENDER_TRIGGERED</span> <span class="token operator">=</span> <span class="token string">&#39;rtg&#39;</span><span class="token punctuation">,</span>
  <span class="token constant">RENDER_TRACKED</span> <span class="token operator">=</span> <span class="token string">&#39;rtc&#39;</span><span class="token punctuation">,</span>
  <span class="token constant">ERROR_CAPTURED</span> <span class="token operator">=</span> <span class="token string">&#39;ec&#39;</span><span class="token punctuation">,</span>
  <span class="token constant">SERVER_PREFETCH</span> <span class="token operator">=</span> <span class="token string">&#39;sp&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// packages\\runtime-core\\src\\apiLifecycle.ts</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> createHook <span class="token operator">=</span>
  <span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Function</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>lifecycle<span class="token operator">:</span> LifecycleHooks<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token punctuation">(</span>hook<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> target<span class="token operator">:</span> ComponentInternalInstance <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> currentInstance<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token comment">// post-create lifecycle registrations are noops during SSR (except for serverPrefetch)</span>
    <span class="token punctuation">(</span><span class="token operator">!</span>isInSSRComponentSetup <span class="token operator">||</span> lifecycle <span class="token operator">===</span> LifecycleHooks<span class="token punctuation">.</span><span class="token constant">SERVER_PREFETCH</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
    <span class="token function">injectHook</span><span class="token punctuation">(</span>lifecycle<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">hook</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">,</span> target<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> onBeforeMount <span class="token operator">=</span> <span class="token function">createHook</span><span class="token punctuation">(</span>LifecycleHooks<span class="token punctuation">.</span><span class="token constant">BEFORE_MOUNT</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> onMounted <span class="token operator">=</span> <span class="token function">createHook</span><span class="token punctuation">(</span>LifecycleHooks<span class="token punctuation">.</span><span class="token constant">MOUNTED</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> onBeforeUpdate <span class="token operator">=</span> <span class="token function">createHook</span><span class="token punctuation">(</span>LifecycleHooks<span class="token punctuation">.</span><span class="token constant">BEFORE_UPDATE</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> onUpdated <span class="token operator">=</span> <span class="token function">createHook</span><span class="token punctuation">(</span>LifecycleHooks<span class="token punctuation">.</span><span class="token constant">UPDATED</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> onBeforeUnmount <span class="token operator">=</span> <span class="token function">createHook</span><span class="token punctuation">(</span>LifecycleHooks<span class="token punctuation">.</span><span class="token constant">BEFORE_UNMOUNT</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> onUnmounted <span class="token operator">=</span> <span class="token function">createHook</span><span class="token punctuation">(</span>LifecycleHooks<span class="token punctuation">.</span><span class="token constant">UNMOUNTED</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> onServerPrefetch <span class="token operator">=</span> <span class="token function">createHook</span><span class="token punctuation">(</span>LifecycleHooks<span class="token punctuation">.</span><span class="token constant">SERVER_PREFETCH</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5);function k(u,d){const s=t("PostInfo");return o(),e("div",null,[r,p(s),i])}const m=a(l,[["render",k],["__file","生命周期.html.vue"]]),E=JSON.parse('{"path":"/blog/vue3/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html","title":"vue3生命周期","lang":"zh-CN","frontmatter":{"title":"vue3生命周期","date":"2024-04-19","author":"清咖","poster":"","tags":["vue3"],"hidden":true,"category":"vue3"},"headers":[],"git":{"updatedTime":1719886485000,"contributors":[{"name":"清咔","email":"874518796@qq.com","commits":2}]},"filePathRelative":"blog/vue3/生命周期.md"}');export{m as comp,E as data};
