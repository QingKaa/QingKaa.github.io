<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.8" />
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <link rel="icon" href="/favicon.png"><title>访问文件夹 | 清咔啊</title><meta name="description" content="欢迎来到清咔的网站">
    <link rel="preload" href="/assets/style-nhWl-Oym.css" as="style"><link rel="stylesheet" href="/assets/style-nhWl-Oym.css">
    <link rel="modulepreload" href="/assets/app-BjyfwaQU.js"><link rel="modulepreload" href="/assets/访问文件夹.html-DVvq7ivU.js">
    <link rel="prefetch" href="/assets/index.html-BjIux-3l.js" as="script"><link rel="prefetch" href="/assets/index.html-C3mTg0ch.js" as="script"><link rel="prefetch" href="/assets/index.html-c2VXMiBe.js" as="script"><link rel="prefetch" href="/assets/index.html-BjDayT31.js" as="script"><link rel="prefetch" href="/assets/webpack-plugin.html-C9Urpow3.js" as="script"><link rel="prefetch" href="/assets/同步加载图片.html-Db2PF55R.js" as="script"><link rel="prefetch" href="/assets/uni-app全局消息通知弹窗(App端).html-DKWRRqTx.js" as="script"><link rel="prefetch" href="/assets/实现一个配置分离的复杂表单.html-C2eCG-uw.js" as="script"><link rel="prefetch" href="/assets/shared-general.html-DIE0y5gK.js" as="script"><link rel="prefetch" href="/assets/生命周期.html-DhLzjTPC.js" as="script"><link rel="prefetch" href="/assets/Mac上安装nvm并且使用.html-CryTFL0j.js" as="script"><link rel="prefetch" href="/assets/Vuepress2中使用UnoCss于tailwindcss.html-jgNXoDof.js" as="script"><link rel="prefetch" href="/assets/vscode 修改默认字体（侧栏、顶栏、目录栏）.html-C6nHBOHC.js" as="script"><link rel="prefetch" href="/assets/前端水印.html-2WQV_S1K.js" as="script"><link rel="prefetch" href="/assets/ECharts大数据量显示.html-CbfAx2FH.js" as="script"><link rel="prefetch" href="/assets/Threejs实战记录.html-y3m4WkE8.js" as="script"><link rel="prefetch" href="/assets/debounce.html-BLpf4kJU.js" as="script"><link rel="prefetch" href="/assets/赋值运算符.html-BRWQqPYp.js" as="script"><link rel="prefetch" href="/assets/App端跳转到深色页面闪白记录及优化处理方法.html-CnF2mLf0.js" as="script"><link rel="prefetch" href="/assets/vuex-persistedstate在UniApp报错的问题(‘setItem‘ of undefined ).html-DbQMQUGC.js" as="script"><link rel="prefetch" href="/assets/记录一次升级SDK引发的Bug.html-CqYSSpP9.js" as="script"><link rel="prefetch" href="/assets/reactive.html-Ch-vpwSF.js" as="script"><link rel="prefetch" href="/assets/vite本地开发开启https.html-Dwe9TFbY.js" as="script"><link rel="prefetch" href="/assets/88-合并两个有序数组.html-CCmES_dN.js" as="script"><link rel="prefetch" href="/assets/两数之和.html-DiUNnWJB.js" as="script"><link rel="prefetch" href="/assets/无重复字符的最长子串.html-CsC0PPhX.js" as="script"><link rel="prefetch" href="/assets/有效括号.html-CO_ZC97f.js" as="script"><link rel="prefetch" href="/assets/深度优先与广度优先算法.html-BjzopnQN.js" as="script"><link rel="prefetch" href="/assets/404.html-3sbiPARB.js" as="script"><link rel="prefetch" href="/assets/index.html-C4pP7VZu.js" as="script"><link rel="prefetch" href="/assets/index.html-BRhmsZwY.js" as="script"><link rel="prefetch" href="/assets/index.html-Bg6P_vPs.js" as="script"><link rel="prefetch" href="/assets/index.html-C0-l-hjr.js" as="script"><link rel="prefetch" href="/assets/index.html-CZf7um5J.js" as="script"><link rel="prefetch" href="/assets/index.html-BigbgW4r.js" as="script"><link rel="prefetch" href="/assets/index.html-Cw4PhCy6.js" as="script"><link rel="prefetch" href="/assets/index.html-CRxs33v1.js" as="script"><link rel="prefetch" href="/assets/index.html-87_ug3U_.js" as="script"><link rel="prefetch" href="/assets/index.html-Dk8p3UiG.js" as="script"><link rel="prefetch" href="/assets/index.html-BadDy8La.js" as="script"><link rel="prefetch" href="/assets/index.html-CNGm-KOS.js" as="script"><link rel="prefetch" href="/assets/index.html-fK47u8dv.js" as="script"><link rel="prefetch" href="/assets/index.html-3cUcV7P3.js" as="script"><link rel="prefetch" href="/assets/index.html-D2_Hvi8u.js" as="script"><link rel="prefetch" href="/assets/index.html-EITLCXHy.js" as="script"><link rel="prefetch" href="/assets/index.html-DVzPfjAK.js" as="script"><link rel="prefetch" href="/assets/index.html-By5FF7Vi.js" as="script"><link rel="prefetch" href="/assets/index.html-B6jXd2M8.js" as="script"><link rel="prefetch" href="/assets/index.html-BGNoEc2C.js" as="script"><link rel="prefetch" href="/assets/index.html-CVer-tR0.js" as="script"><link rel="prefetch" href="/assets/index.html-D8bQtGYm.js" as="script"><link rel="prefetch" href="/assets/index.html-DlQnwe2p.js" as="script"><link rel="prefetch" href="/assets/index.html-QEzjNmk6.js" as="script"><link rel="prefetch" href="/assets/index.html-6FmS722l.js" as="script"><link rel="prefetch" href="/assets/index.html-aodySdXC.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="site-name" aria-hidden="true">清咔啊</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide" aria-label="site navigation"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="文章分类"><span class="title">文章分类</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="文章分类"><span class="title">文章分类</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/blog/ECharts/" aria-label="ECharts"><!--[--><!--]--> ECharts <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/blog/ThreeJs/" aria-label="ThreeJs"><!--[--><!--]--> ThreeJs <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/blog/js%E5%9F%BA%E7%A1%80/" aria-label="js基础"><!--[--><!--]--> js基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/blog/uniApp/" aria-label="uniApp"><!--[--><!--]--> uniApp <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/blog/vue3/" aria-label="vue3"><!--[--><!--]--> vue3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/blog/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/" aria-label="前端工程化"><!--[--><!--]--> 前端工程化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/blog/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/" aria-label="技术分享"><!--[--><!--]--> 技术分享 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/blog/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB/" aria-label="杂七杂八"><!--[--><!--]--> 杂七杂八 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link route-link-active" href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/" aria-label="浏览器"><!--[--><!--]--> 浏览器 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/blog/%E7%AE%97%E6%B3%95/" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://qingkaa.github.io/demo/#" rel="noopener noreferrer" target="_blank" aria-label="示例集合"><!--[--><!--]--> 示例集合 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/QingKaa/QingKaa.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items" aria-label="site navigation"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="文章分类"><span class="title">文章分类</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="文章分类"><span class="title">文章分类</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/blog/ECharts/" aria-label="ECharts"><!--[--><!--]--> ECharts <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/blog/ThreeJs/" aria-label="ThreeJs"><!--[--><!--]--> ThreeJs <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/blog/js%E5%9F%BA%E7%A1%80/" aria-label="js基础"><!--[--><!--]--> js基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/blog/uniApp/" aria-label="uniApp"><!--[--><!--]--> uniApp <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/blog/vue3/" aria-label="vue3"><!--[--><!--]--> vue3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/blog/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/" aria-label="前端工程化"><!--[--><!--]--> 前端工程化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/blog/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/" aria-label="技术分享"><!--[--><!--]--> 技术分享 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/blog/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB/" aria-label="杂七杂八"><!--[--><!--]--> 杂七杂八 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link route-link-active" href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/" aria-label="浏览器"><!--[--><!--]--> 浏览器 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/blog/%E7%AE%97%E6%B3%95/" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://qingkaa.github.io/demo/#" rel="noopener noreferrer" target="_blank" aria-label="示例集合"><!--[--><!--]--> 示例集合 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/QingKaa/QingKaa.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">访问文件夹 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/#window-showdirectorypicker" aria-label="Window：showDirectoryPicker()"><!--[--><!--]--> Window：showDirectoryPicker() <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#启用https" aria-label="启用https"><!--[--><!--]--> 启用https <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#实现" aria-label="实现"><!--[--><!--]--> 实现 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/#效果图" aria-label="效果图"><!--[--><!--]--> 效果图 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#读取文件内容" aria-label="读取文件内容"><!--[--><!--]--> 读取文件内容 <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/#代码高亮" aria-label="代码高亮"><!--[--><!--]--> 代码高亮 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link sidebar-item" href="/#最后" aria-label="最后"><!--[--><!--]--> 最后 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="访问文件夹" tabindex="-1"><a class="header-anchor" href="#访问文件夹"><span>访问文件夹</span></a></h1><div class="post-info"><div class="auth-info flex justify-start items-center my-2"><div class="front-info mr4">清咖</div><div class="front-info mr4">2024-06-16</div><div class="front-info mr"><a class="route-link" href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/" aria-label="浏览器"><!--[--><!--]--> 浏览器 <!--[--><!--]--></a></div></div></div><p><a href="https://qingkaa.github.io/demo/#/other/readFolders" target="_blank" rel="noopener noreferrer">demo体验地址<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>网页版vscode有个功能是可以直接访问本地文件夹 <a href="https://vscode.dev/" target="_blank" rel="noopener noreferrer">vscode.dev<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><img src="/assets/vscode-demo-CYWLXz1U.png" alt="vscode"></p><p>这之前，因为浏览器的安全限制，前端一直是无法直接访问本地文件夹。现如今，一个新的API允许前端访问本地文件夹,前端的确是日新月异，一起来了解下这个API：<strong>Window：showDirectoryPicker() 方法</strong></p><h2 id="window-showdirectorypicker" tabindex="-1"><a class="header-anchor" href="#window-showdirectorypicker"><span>Window：showDirectoryPicker()</span></a></h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/showDirectoryPicker" target="_blank" rel="noopener noreferrer">MDN说明<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><code>Window</code> 接口的 <code>showDirectoryPicker()</code> 方法用于显示一个目录选择器，以允许用户选择一个目录。</p><p>该方法返回一个 <code>FileSystemDirectoryHandle</code> 对象。</p><blockquote><p>安全上下文: 此项功能仅在一些支持的浏览器的安全上下文（HTTPS）中可用。</p></blockquote><blockquote><p>实验性: 这是一项实验性技术,在将其用于生产之前，请仔细检查浏览器兼容性表格。</p></blockquote><p>该方法接受一个 <strong>option</strong> 对象参数，该对象包含以下属性：</p><ul><li><strong>mode(可选)</strong>： 选择器模式，可选值为 &quot;read&quot; 或 &quot;readwrite&quot;。默认为 &quot;read&quot;。</li><li><strong>id(可选)</strong>：通过指定 ID，浏览器可以为不同的 ID 记住不同的目录。如果相同的 ID 用于另一个选择器，则该选择器将在同一目录中打开。</li><li><strong>startIn(可选)</strong>： 一个 FileSystemHandle 对象或者代表某个众所周知的目录的字符串（如：&quot;desktop&quot;、&quot;documents&quot;、&quot;downloads&quot;、&quot;music&quot;、&quot;pictures&quot;、&quot;videos&quot;），用于指定选择器的起始目录。</li></ul><p>No BB，实现一下。</p><h2 id="启用https" tabindex="-1"><a class="header-anchor" href="#启用https"><span>启用https</span></a></h2><p><a href="https://qingkaa.github.io/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/vite%E6%9C%AC%E5%9C%B0%E5%BC%80%E5%8F%91%E5%BC%80%E5%90%AFhttps/vite%E6%9C%AC%E5%9C%B0%E5%BC%80%E5%8F%91%E5%BC%80%E5%90%AFhttps.html" target="_blank" rel="noopener noreferrer">看这里<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="实现" tabindex="-1"><a class="header-anchor" href="#实现"><span>实现</span></a></h2><h3 id="效果图" tabindex="-1"><a class="header-anchor" href="#效果图"><span>效果图</span></a></h3><p>先看效果<br><img src="data:image/png;base64,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" alt="demo1"><img src="/assets/demo-CDL4Q_ks.png" alt="demo"></p><p>点击按钮，弹出选择文件夹的对话框。</p><div class="language-typescript line-numbers-mode" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">openFolder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dirLoading<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token keyword">return</span>
    dirLoading<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> handle <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span><span class="token function">showDirectoryPicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;  =====&gt; handle:&#39;</span><span class="token punctuation">,</span> handle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">processHandler</span><span class="token punctuation">(</span>handle<span class="token punctuation">)</span>
        folderTree<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">[</span>root<span class="token punctuation">]</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
    dirLoading<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>window.showDirectoryPicker</code> 这个操作是异步的，而且在用户取消的时候会抛出异常，所以需要 <code>try catch</code> 包裹。<br> 拿到的 handle 是一个句柄 FileSystemDirectoryHandle, 打印出来看一下长什么样：</p><p><img src="/assets/handle-log-CuWNHK2r.png" alt="handle"></p><p>OK, 接下来需要递归处理整个文件夹的所有内容，将其转换成一个树形结构。</p><p>定义一个递归函数：<code>processHandler</code>：</p><div class="language-typescript line-numbers-mode" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">processHandler</span><span class="token punctuation">(</span>handle<span class="token operator">:</span> FileSystemDirectoryHandle <span class="token operator">|</span> FileSystemFileHandle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newHandle<span class="token operator">:</span> FolderOrFileItem <span class="token operator">=</span> <span class="token punctuation">{</span>
        kind<span class="token operator">:</span> handle<span class="token punctuation">.</span>kind<span class="token punctuation">,</span>
        name<span class="token operator">:</span> handle<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
        handle<span class="token operator">:</span> handle<span class="token punctuation">,</span>
        children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newHandle<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&#39;file&#39;</span><span class="token punctuation">)</span> <span class="token keyword">return</span> newHandle<span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> iter <span class="token operator">=</span> <span class="token keyword">await</span> handle<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>iter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> info <span class="token keyword">of</span> iter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;  =====&gt; info:&#39;</span><span class="token punctuation">,</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">const</span> subHandle <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">processHandler</span><span class="token punctuation">(</span>info<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                    newHandle<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>subHandle<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> newHandle
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>前端有一个点很好，有啥可以直接console出来，直观的看到该数据的结构。<br> 打印的info如下： <img src="/assets/log-info-BxgrGMQU.png" alt="log-info"><br> info 是一个数组，第一个是文件名，第二个是句柄。句柄有可能是FileSystemDirectoryHandle，也有可能是FileSystemFileHandle。递归的终止条件也是根据这个来处理：文件类型则返回，文件夹类型则继续递归。最后组合成一个树形对象。</p><p>页面的树形使用了 element-plus 的组件。</p><h3 id="读取文件内容" tabindex="-1"><a class="header-anchor" href="#读取文件内容"><span>读取文件内容</span></a></h3><p>读取文件内容那就是非 FileReader 莫属了。</p><p>通过文件的句柄获取文件对象：<code>const file = await (item.handle as FileSystemFileHandle).getFile()</code><br> 通过 FileReader 将文件内容以文本形式读取<br> 最后将内容显示出来</p><div class="language-typescript line-numbers-mode" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">handleNodeClick</span><span class="token punctuation">(</span>item<span class="token operator">:</span> FolderOrFileItem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&quot;directory&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>fileLoading<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token keyword">return</span>
    fileLoading<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> file <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>handle <span class="token keyword">as</span> FileSystemFileHandle<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> fileReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        fileReader<span class="token punctuation">.</span><span class="token function">readAsText</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">)</span>
        fileReader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> e <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            activeFileData<span class="token punctuation">.</span>value <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token operator">?.</span>result <span class="token keyword">as</span> <span class="token builtin">string</span>
            fileLoading<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="代码高亮" tabindex="-1"><a class="header-anchor" href="#代码高亮"><span>代码高亮</span></a></h3><p>代码高亮用了一个三方库<a href="https://highlightjs.org/" target="_blank" rel="noopener noreferrer">highlight.js<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="最后" tabindex="-1"><a class="header-anchor" href="#最后"><span>最后</span></a></h2><p>不得不感叹，前端能做的东西是越来越多。</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 874518796@qq.com">清咔</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BjyfwaQU.js" defer></script>
  </body>
</html>
